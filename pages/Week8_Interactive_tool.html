<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìä PLS 120: Week 8 - Hypothesis Testing Lab</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ucd-green': '#16a085',
                        'ucd-dark': '#2d8659',
                        'ucd-light': '#48c9b0'
                    }
                }
            }
        }
    </script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .btn-animate {
            transition: all 0.3s ease;
        }
        
        .btn-animate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-full"><!-- Key Concepts Overview -->
  <section class="py-8 bg-white">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üéØ Statistical Tests Overview</h2>
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
     <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg shadow card-hover border-l-4 border-blue-500">
      <h3 class="text-lg font-bold text-blue-700 mb-3 flex items-center"><span class="text-2xl mr-2">üî¨</span> One-Sample T-Test</h3>
      <div class="text-center bg-white p-3 rounded mb-3"><code class="text-blue-600 font-bold">t = (xÃÑ - Œº‚ÇÄ) / (s/‚àön)</code>
      </div>
      <p class="text-sm text-blue-600">Compare sample mean against known value</p>
     </div>
     <div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg shadow card-hover border-l-4 border-green-500">
      <h3 class="text-lg font-bold text-green-700 mb-3 flex items-center"><span class="text-2xl mr-2">üìä</span> Two-Sample T-Test</h3>
      <div class="text-center bg-white p-3 rounded mb-3"><code class="text-green-600 font-bold text-xs">t = (xÃÑ‚ÇÅ-xÃÑ‚ÇÇ)/‚àö(s‚ÇÅ¬≤/n‚ÇÅ+s‚ÇÇ¬≤/n‚ÇÇ)</code>
      </div>
      <p class="text-sm text-green-600">Compare means between independent groups</p>
     </div>
     <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg shadow card-hover border-l-4 border-purple-500">
      <h3 class="text-lg font-bold text-purple-700 mb-3 flex items-center"><span class="text-2xl mr-2">üîó</span> Paired T-Test</h3>
      <div class="text-center bg-white p-3 rounded mb-3"><code class="text-purple-600 font-bold">t = dÃÑ / (s_d/‚àön)</code>
      </div>
      <p class="text-sm text-purple-600">Analyze before/after or matched pair data</p>
     </div>
     <div class="bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg shadow card-hover border-l-4 border-red-500">
      <h3 class="text-lg font-bold text-red-700 mb-3 flex items-center"><span class="text-2xl mr-2">üé≤</span> Chi-Square Test</h3>
      <div class="text-center bg-white p-3 rounded mb-3"><code class="text-red-600 font-bold">œá¬≤ = Œ£(O-E)¬≤/E</code>
      </div>
      <p class="text-sm text-red-600">Test goodness of fit and independence</p>
     </div>
    </div>
   </div>
  </section><!-- Interactive Hypothesis Testing Simulator -->
  <section class="py-12">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üî¨ Interactive Hypothesis Testing Simulator</h2>
    <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-8 mb-8 card-hover">
     <h3 class="text-2xl font-bold text-blue-700 mb-6 text-center">Design Your Hypothesis Test</h3>
     <div class="grid lg:grid-cols-2 gap-8 mb-8"><!-- Test Configuration -->
      <div class="bg-white p-6 rounded-lg shadow">
       <h4 class="text-lg font-bold text-blue-700 mb-4">‚öôÔ∏è Test Configuration</h4>
       <div class="space-y-4">
        <div><label for="scenarioSelect" class="block text-sm font-medium text-blue-700 mb-2">Research Scenario</label> <select id="scenarioSelect" class="w-full p-2 border rounded" onchange="updateScenario()"> <option value="wildfire">Biodiversity Before/After Wildfire</option> <option value="fertilizer">Fertilizer vs Control Treatment</option> <option value="variety">Crop Variety A vs B</option> <option value="pesticide">Organic vs Chemical Pesticide</option> </select>
        </div>
        <div><label class="block text-sm font-medium text-blue-700 mb-2">Test Type</label>
         <div class="space-y-2"><label class="flex items-center p-2 border rounded hover:bg-gray-50 cursor-pointer"> <input type="radio" name="testType" value="two-sided" checked onchange="updateHypothesisTest()" class="mr-2"> <span class="text-sm">Two-sided (H‚ÇÅ: Œº‚ÇÅ ‚â† Œº‚ÇÇ)</span> </label> <label class="flex items-center p-2 border rounded hover:bg-gray-50 cursor-pointer"> <input type="radio" name="testType" value="greater" onchange="updateHypothesisTest()" class="mr-2"> <span class="text-sm">One-sided greater (H‚ÇÅ: Œº‚ÇÅ &gt; Œº‚ÇÇ)</span> </label> <label class="flex items-center p-2 border rounded hover:bg-gray-50 cursor-pointer"> <input type="radio" name="testType" value="less" onchange="updateHypothesisTest()" class="mr-2"> <span class="text-sm">One-sided less (H‚ÇÅ: Œº‚ÇÅ &lt; Œº‚ÇÇ)</span> </label>
         </div>
        </div>
        <div><label for="alphaSelect" class="block text-sm font-medium text-blue-700 mb-2">Significance Level (Œ±)</label> <select id="alphaSelect" class="w-full p-2 border rounded" onchange="updateHypothesisTest()"> <option value="0.10">0.10 (90% confidence)</option> <option value="0.05" selected>0.05 (95% confidence)</option> <option value="0.01">0.01 (99% confidence)</option> </select>
        </div>
       </div>
      </div><!-- Hypothesis Statements -->
      <div class="bg-white p-6 rounded-lg shadow">
       <h4 class="text-lg font-bold text-blue-700 mb-4">üìù Hypothesis Statements</h4>
       <div id="hypothesisStatements" class="space-y-4"><!-- Will be populated by JavaScript -->
       </div>
      </div>
     </div><!-- Sample Data Inputs -->
     <div class="bg-white p-6 rounded-lg shadow mb-6">
      <h4 class="text-lg font-bold text-blue-700 mb-4 text-center">üìä Sample Data</h4>
      <div class="grid md:grid-cols-2 gap-6"><!-- Group 1 -->
       <div class="border-l-4 border-gray-500 pl-4">
        <h5 class="font-bold text-gray-700 mb-3" id="group1Label">Group 1</h5>
        <div class="space-y-3">
         <div><label class="block text-sm font-medium text-gray-700 mb-1"> Sample Size (n‚ÇÅ): <span id="n1Value" class="font-bold">30</span> </label> <input type="range" id="n1Slider" min="10" max="50" value="30" class="w-full" oninput="updateHypothesisTest()">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-1"> Mean (xÃÑ‚ÇÅ): <span id="mean1Value" class="font-bold">55.0</span> </label> <input type="range" id="mean1Slider" min="40" max="80" step="0.5" value="55" class="w-full" oninput="updateHypothesisTest()">
         </div>
         <div><label class="block text-sm font-medium text-gray-700 mb-1"> Std Dev (s‚ÇÅ): <span id="sd1Value" class="font-bold">8.0</span> </label> <input type="range" id="sd1Slider" min="5" max="15" step="0.5" value="8" class="w-full" oninput="updateHypothesisTest()">
         </div>
        </div>
       </div><!-- Group 2 -->
       <div class="border-l-4 border-green-500 pl-4">
        <h5 class="font-bold text-green-700 mb-3" id="group2Label">Group 2</h5>
        <div class="space-y-3">
         <div><label class="block text-sm font-medium text-green-700 mb-1"> Sample Size (n‚ÇÇ): <span id="n2Value" class="font-bold">28</span> </label> <input type="range" id="n2Slider" min="10" max="50" value="28" class="w-full" oninput="updateHypothesisTest()">
         </div>
         <div><label class="block text-sm font-medium text-green-700 mb-1"> Mean (xÃÑ‚ÇÇ): <span id="mean2Value" class="font-bold">62.0</span> </label> <input type="range" id="mean2Slider" min="40" max="80" step="0.5" value="62" class="w-full" oninput="updateHypothesisTest()">
         </div>
         <div><label class="block text-sm font-medium text-green-700 mb-1"> Std Dev (s‚ÇÇ): <span id="sd2Value" class="font-bold">7.5</span> </label> <input type="range" id="sd2Slider" min="5" max="15" step="0.5" value="7.5" class="w-full" oninput="updateHypothesisTest()">
         </div>
        </div>
       </div>
      </div>
      <div class="text-center mt-6"><button onclick="generateRandomData()" class="bg-blue-600 text-white px-6 py-3 rounded btn-animate font-semibold"> üé≤ Generate New Random Data </button>
      </div>
     </div><!-- Test Results -->
     <div id="testResults" class="bg-white p-6 rounded-lg shadow">
      <h4 class="text-lg font-bold text-blue-700 mb-4 text-center">üìä Test Results</h4><!-- Will be populated by JavaScript -->
     </div>
    </div>
   </div>
  </section><!-- P-Value vs Critical Value Comparison -->
  <section class="py-12 bg-white">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üîç Three Ways to Test Hypotheses</h2>
    <div class="bg-gradient-to-br from-purple-50 to-pink-100 rounded-lg p-8 card-hover">
     <h3 class="text-2xl font-bold text-purple-700 mb-6 text-center">All Methods Give the Same Conclusion!</h3>
     <div id="comparisonMethods" class="grid md:grid-cols-3 gap-6"><!-- Will be populated by JavaScript -->
     </div>
     <div class="mt-6 bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
      <h5 class="font-bold text-yellow-700 mb-2">üí° Key Insight:</h5>
      <p class="text-sm text-yellow-700">Whether you use critical values, p-values, or R's t.test() function, you'll reach the same statistical conclusion. Choose the method that makes most sense for your analysis!</p>
     </div>
    </div>
   </div>
  </section><!-- Agricultural Data Simulator -->
  <section class="py-12">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üåæ Agricultural Data Simulator</h2>
    <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-lg p-8 mb-8 card-hover">
     <h3 class="text-2xl font-bold text-green-700 mb-6 text-center">Before/After Treatment Analysis</h3>
     <div class="grid lg:grid-cols-2 gap-8 mb-8"><!-- Controls -->
      <div class="bg-white p-6 rounded-lg shadow">
       <h4 class="text-lg font-bold text-green-700 mb-4">‚öôÔ∏è Treatment Parameters</h4>
       <div class="space-y-4">
        <div><label class="block text-sm font-medium text-green-700 mb-1"> Pre-Treatment Mean: <span id="preMeanValue" class="font-bold">45.0</span> </label> <input type="range" id="preMeanSlider" min="30" max="70" step="0.5" value="45" class="w-full" oninput="updatePairedTest()">
        </div>
        <div><label class="block text-sm font-medium text-green-700 mb-1"> Post-Treatment Mean: <span id="postMeanValue" class="font-bold">52.0</span> </label> <input type="range" id="postMeanSlider" min="30" max="70" step="0.5" value="52" class="w-full" oninput="updatePairedTest()">
        </div>
        <div><label class="block text-sm font-medium text-green-700 mb-1"> Sample Size (plots): <span id="pairedNValue" class="font-bold">25</span> </label> <input type="range" id="pairedNSlider" min="10" max="50" value="25" class="w-full" oninput="updatePairedTest()">
        </div>
        <div><label class="block text-sm font-medium text-green-700 mb-1"> Variability: <span id="pairedSDValue" class="font-bold">6.0</span> </label> <input type="range" id="pairedSDSlider" min="3" max="12" step="0.5" value="6" class="w-full" oninput="updatePairedTest()">
        </div>
       </div>
       <div class="mt-6"><button onclick="generatePairedData()" class="w-full bg-green-600 text-white py-3 rounded btn-animate font-semibold"> üé≤ Generate New Paired Data </button>
       </div>
      </div><!-- Results -->
      <div class="bg-white p-6 rounded-lg shadow">
       <h4 class="text-lg font-bold text-green-700 mb-4">üìä Paired T-Test Results</h4>
       <div id="pairedResults"><!-- Will be populated by JavaScript -->
       </div>
      </div>
     </div><!-- Visualization -->
     <div class="bg-white p-6 rounded-lg shadow">
      <h4 class="text-lg font-bold text-green-700 mb-4 text-center">üìà Before/After Comparison</h4>
      <div id="pairedVisualization"><!-- Will be populated by JavaScript -->
      </div>
     </div>
    </div>
   </div>
  </section><!-- Chi-Square Interactive Demo -->
  <section class="py-12 bg-white">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üé≤ Chi-Square Test Interactive Demo</h2>
    <div class="grid lg:grid-cols-2 gap-8"><!-- Dice Fairness Test -->
     <div class="bg-gradient-to-br from-red-50 to-orange-100 rounded-lg p-8 card-hover">
      <h3 class="text-2xl font-bold text-red-700 mb-6 text-center">üé≤ Dice Fairness Test</h3>
      <div class="bg-white p-6 rounded-lg shadow mb-6">
       <h4 class="text-lg font-bold text-red-700 mb-4">Observed Frequencies</h4>
       <div class="grid grid-cols-3 gap-3">
        <div><label class="block text-xs font-medium text-gray-700 mb-1">‚öÄ Face 1</label> <input type="number" id="dice1" value="15" min="0" class="w-full p-2 border rounded text-center" oninput="updateChiSquare()">
        </div>
        <div><label class="block text-xs font-medium text-gray-700 mb-1">‚öÅ Face 2</label> <input type="number" id="dice2" value="18" min="0" class="w-full p-2 border rounded text-center" oninput="updateChiSquare()">
        </div>
        <div><label class="block text-xs font-medium text-gray-700 mb-1">‚öÇ Face 3</label> <input type="number" id="dice3" value="22" min="0" class="w-full p-2 border rounded text-center" oninput="updateChiSquare()">
        </div>
        <div><label class="block text-xs font-medium text-gray-700 mb-1">‚öÉ Face 4</label> <input type="number" id="dice4" value="17" min="0" class="w-full p-2 border rounded text-center" oninput="updateChiSquare()">
        </div>
        <div><label class="block text-xs font-medium text-gray-700 mb-1">‚öÑ Face 5</label> <input type="number" id="dice5" value="19" min="0" class="w-full p-2 border rounded text-center" oninput="updateChiSquare()">
        </div>
        <div><label class="block text-xs font-medium text-gray-700 mb-1">‚öÖ Face 6</label> <input type="number" id="dice6" value="29" min="0" class="w-full p-2 border rounded text-center" oninput="updateChiSquare()">
        </div>
       </div>
       <div class="mt-4 text-center"><button onclick="generateDiceData()" class="bg-red-600 text-white px-4 py-2 rounded btn-animate text-sm"> üé≤ Roll 120 Times </button>
       </div>
      </div>
      <div id="chiSquareResults" class="bg-white p-6 rounded-lg shadow"><!-- Will be populated by JavaScript -->
      </div>
     </div><!-- Contingency Table -->
     <div class="bg-gradient-to-br from-indigo-50 to-blue-100 rounded-lg p-8 card-hover">
      <h3 class="text-2xl font-bold text-indigo-700 mb-6 text-center">üìä Contingency Table Test</h3>
      <div class="bg-white p-6 rounded-lg shadow mb-6">
       <h4 class="text-lg font-bold text-indigo-700 mb-4">Gender vs Fruit Preference</h4>
       <div class="overflow-x-auto">
        <table class="w-full border-collapse">
         <thead>
          <tr class="bg-indigo-100">
           <th class="border p-2 text-sm"></th>
           <th class="border p-2 text-sm">üçé Apple</th>
           <th class="border p-2 text-sm">üçå Banana</th>
           <th class="border p-2 text-sm">üçä Orange</th>
          </tr>
         </thead>
         <tbody>
          <tr>
           <td class="border p-2 text-sm font-bold bg-gray-50">Male</td>
           <td class="border p-2"><input type="number" id="cell11" value="20" min="0" class="w-full p-1 text-center border rounded" oninput="updateContingency()"></td>
           <td class="border p-2"><input type="number" id="cell12" value="15" min="0" class="w-full p-1 text-center border rounded" oninput="updateContingency()"></td>
           <td class="border p-2"><input type="number" id="cell13" value="10" min="0" class="w-full p-1 text-center border rounded" oninput="updateContingency()"></td>
          </tr>
          <tr>
           <td class="border p-2 text-sm font-bold bg-gray-50">Female</td>
           <td class="border p-2"><input type="number" id="cell21" value="25" min="0" class="w-full p-1 text-center border rounded" oninput="updateContingency()"></td>
           <td class="border p-2"><input type="number" id="cell22" value="18" min="0" class="w-full p-1 text-center border rounded" oninput="updateContingency()"></td>
           <td class="border p-2"><input type="number" id="cell23" value="22" min="0" class="w-full p-1 text-center border rounded" oninput="updateContingency()"></td>
          </tr>
         </tbody>
        </table>
       </div>
       <div class="mt-4 text-center"><button onclick="generateContingencyData()" class="bg-indigo-600 text-white px-4 py-2 rounded btn-animate text-sm"> üé≤ Generate New Data </button>
       </div>
      </div>
      <div id="contingencyResults" class="bg-white p-6 rounded-lg shadow"><!-- Will be populated by JavaScript -->
      </div>
     </div>
    </div>
   </div>
  </section><!-- Practice Quiz -->
  <section class="py-12">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üéØ Practice Quiz</h2>
    <div class="max-w-4xl mx-auto">
     <div class="bg-gradient-to-br from-indigo-50 to-blue-100 rounded-lg shadow-lg p-6">
      <div class="mb-6">
       <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold text-indigo-700">Question <span id="currentQuestion">1</span> of 5</h3>
        <div class="text-sm text-indigo-600">
         Progress: <span id="quizProgress">0%</span>
        </div>
       </div>
       <div class="w-full bg-gray-200 rounded-full h-3">
        <div id="progressBar" class="bg-indigo-500 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
       </div>
      </div>
      <div id="quizContent"><!-- Quiz questions will be loaded here -->
      </div>
      <div class="mt-6 flex justify-between"><button id="prevBtn" onclick="previousQuestion()" class="bg-gray-500 text-white px-6 py-2 rounded btn-animate" disabled>Previous</button> <button id="nextBtn" onclick="nextQuestion()" class="bg-indigo-500 text-white px-6 py-2 rounded btn-animate">Next</button>
      </div>
      <div id="quizResults" class="mt-6 hidden"><!-- Results will be shown here -->
      </div>
     </div>
    </div>
   </div>
  </section><!-- Key Takeaways -->
  <section class="py-12 bg-gradient-to-br from-green-50 to-emerald-100">
   <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üéì Key Takeaways</h2>
    <div class="grid md:grid-cols-3 gap-6">
     <div class="bg-white p-6 rounded-lg shadow card-hover border-l-4 border-blue-500">
      <div class="text-center mb-4">
       <div class="text-4xl mb-2">
        üî¨
       </div>
       <h3 class="text-xl font-bold text-blue-700">Hypothesis Testing Benefits</h3>
      </div>
      <ul class="text-blue-600 text-sm space-y-1">
       <li>‚Ä¢ Rigorous statistical inference</li>
       <li>‚Ä¢ Evidence-based decisions</li>
       <li>‚Ä¢ Quantified uncertainty</li>
       <li>‚Ä¢ Reproducible results</li>
      </ul>
     </div>
     <div class="bg-white p-6 rounded-lg shadow card-hover border-l-4 border-green-500">
      <div class="text-center mb-4">
       <div class="text-4xl mb-2">
        üìä
       </div>
       <h3 class="text-xl font-bold text-green-700">Test Selection Guide</h3>
      </div>
      <ul class="text-green-600 text-sm space-y-1">
       <li>‚Ä¢ Paired for before/after</li>
       <li>‚Ä¢ Independent for group comparisons</li>
       <li>‚Ä¢ Chi-square for categorical data</li>
       <li>‚Ä¢ One-sample for known standards</li>
      </ul>
     </div>
     <div class="bg-white p-6 rounded-lg shadow card-hover border-l-4 border-purple-500">
      <div class="text-center mb-4">
       <div class="text-4xl mb-2">
        üåø
       </div>
       <h3 class="text-xl font-bold text-purple-700">Environmental Applications</h3>
      </div>
      <ul class="text-purple-600 text-sm space-y-1">
       <li>‚Ä¢ Biodiversity studies</li>
       <li>‚Ä¢ Treatment effectiveness</li>
       <li>‚Ä¢ Climate change impacts</li>
       <li>‚Ä¢ Conservation decisions</li>
      </ul>
     </div>
    </div>
   </div>
  </section>
  <script>
        // Global variables
        let currentQuestionIndex = 0;
        let quizAnswers = [];
        
        // Quiz questions
        const quizQuestions = [
            {
                question: "When should you use a paired t-test instead of a two-sample t-test?",
                options: [
                    "When you have large sample sizes",
                    "For before/after measurements on the same subjects",
                    "When distributions are normal",
                    "When variances are equal"
                ],
                correct: 1,
                explanation: "Use paired t-tests for before/after or matched pair data where observations are dependent. Each subject serves as its own control."
            },
            {
                question: "What does a p-value of 0.03 mean in hypothesis testing?",
                options: [
                    "There's a 3% chance the null hypothesis is true",
                    "You have 97% confidence in your results",
                    "There's a 3% chance of Type I error if you reject H‚ÇÄ",
                    "There's a 3% probability of observing data this extreme if H‚ÇÄ is true"
                ],
                correct: 3,
                explanation: "P-value is the probability of observing a test statistic this extreme or more extreme, assuming the null hypothesis is true."
            },
            {
                question: "In a chi-square goodness of fit test, what do we compare?",
                options: [
                    "Sample means from different groups",
                    "Observed frequencies vs expected frequencies",
                    "Correlation coefficients",
                    "Confidence intervals"
                ],
                correct: 1,
                explanation: "Chi-square tests compare observed frequencies in your data to expected frequencies under the null hypothesis."
            },
            {
                question: "What is the difference between one-tailed and two-tailed tests?",
                options: [
                    "Sample size requirements differ",
                    "One-tailed tests specify direction of the alternative hypothesis",
                    "They use different types of data",
                    "Confidence levels must be different"
                ],
                correct: 1,
                explanation: "One-tailed tests specify direction (Œº‚ÇÅ > Œº‚ÇÇ or Œº‚ÇÅ < Œº‚ÇÇ), while two-tailed tests look for any difference (Œº‚ÇÅ ‚â† Œº‚ÇÇ)."
            },
            {
                question: "When analyzing wildfire effects on biodiversity using before/after data, which test is most appropriate?",
                options: [
                    "One-sample t-test",
                    "Two-sample t-test",
                    "Paired t-test",
                    "Chi-square test"
                ],
                correct: 2,
                explanation: "Paired t-test is appropriate for before/after measurements on the same subjects/plots, as the observations are dependent."
            }
        ];

        // Utility functions
        function normalRandom(mean = 0, sd = 1) {
            let u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            return mean + sd * Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
        }

        function getTValue(df, alpha, tails = 2) {
            const tTable = {
                1: { 0.10: 6.314, 0.05: 12.706, 0.01: 63.657 },
                5: { 0.10: 2.015, 0.05: 2.571, 0.01: 4.032 },
                10: { 0.10: 1.812, 0.05: 2.228, 0.01: 3.169 },
                15: { 0.10: 1.753, 0.05: 2.131, 0.01: 2.947 },
                20: { 0.10: 1.725, 0.05: 2.086, 0.01: 2.845 },
                25: { 0.10: 1.708, 0.05: 2.060, 0.01: 2.787 },
                30: { 0.10: 1.697, 0.05: 2.042, 0.01: 2.750 },
                50: { 0.10: 1.676, 0.05: 2.009, 0.01: 2.678 },
                100: { 0.10: 1.660, 0.05: 1.984, 0.01: 2.626 }
            };
            
            const dfs = Object.keys(tTable).map(Number).sort((a, b) => a - b);
            let closestDf = dfs[dfs.length - 1];
            for (let i = 0; i < dfs.length; i++) {
                if (df <= dfs[i]) {
                    closestDf = dfs[i];
                    break;
                }
            }
            
            const adjustedAlpha = tails === 1 ? alpha * 2 : alpha;
            return tTable[closestDf][adjustedAlpha.toFixed(2)] || 1.96;
        }

        function normalCDF(z) {
            return 0.5 * (1 + erf(z / Math.sqrt(2)));
        }

        function erf(x) {
            const a1 =  0.254829592;
            const a2 = -0.284496736;
            const a3 =  1.421413741;
            const a4 = -1.453152027;
            const a5 =  1.061405429;
            const p  =  0.3275911;
            
            const sign = x >= 0 ? 1 : -1;
            x = Math.abs(x);
            
            const t = 1.0 / (1.0 + p * x);
            const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);
            
            return sign * y;
        }

        function chiSquareCDF(x, df) {
            // Approximation for chi-square CDF
            if (x <= 0) return 0;
            const k = df / 2;
            const z = x / 2;
            let sum = 0;
            let term = Math.pow(z, k) * Math.exp(-z);
            
            for (let i = 0; i < k; i++) {
                term = term * z / (k + i);
            }
            
            // Rough approximation
            if (df === 5) {
                if (x < 1.145) return 0.05;
                if (x < 9.236) return 0.5;
                return 0.95;
            }
            
            return 0.5; // Fallback
        }

        // Scenario configurations
        const scenarios = {
            wildfire: {
                name: "Biodiversity Before/After Wildfire",
                group1: "Before Wildfire",
                group2: "After Wildfire",
                measure: "species count",
                isPaired: true
            },
            fertilizer: {
                name: "Fertilizer vs Control Treatment",
                group1: "Control",
                group2: "Fertilizer",
                measure: "yield (bu/acre)",
                isPaired: false
            },
            variety: {
                name: "Crop Variety A vs B",
                group1: "Variety A",
                group2: "Variety B",
                measure: "yield (bu/acre)",
                isPaired: false
            },
            pesticide: {
                name: "Organic vs Chemical Pesticide",
                group1: "Chemical",
                group2: "Organic",
                measure: "pest control (%)",
                isPaired: false
            }
        };

        // Update scenario
        function updateScenario() {
            const scenario = document.getElementById('scenarioSelect').value;
            const config = scenarios[scenario];
            
            document.getElementById('group1Label').textContent = config.group1;
            document.getElementById('group2Label').textContent = config.group2;
            
            updateHypothesisTest();
        }

        // Update hypothesis test
        function updateHypothesisTest() {
            // Update slider values
            const n1 = parseInt(document.getElementById('n1Slider').value);
            const mean1 = parseFloat(document.getElementById('mean1Slider').value);
            const sd1 = parseFloat(document.getElementById('sd1Slider').value);
            const n2 = parseInt(document.getElementById('n2Slider').value);
            const mean2 = parseFloat(document.getElementById('mean2Slider').value);
            const sd2 = parseFloat(document.getElementById('sd2Slider').value);
            
            document.getElementById('n1Value').textContent = n1;
            document.getElementById('mean1Value').textContent = mean1.toFixed(1);
            document.getElementById('sd1Value').textContent = sd1.toFixed(1);
            document.getElementById('n2Value').textContent = n2;
            document.getElementById('mean2Value').textContent = mean2.toFixed(1);
            document.getElementById('sd2Value').textContent = sd2.toFixed(1);
            
            // Get test configuration
            const scenario = document.getElementById('scenarioSelect').value;
            const config = scenarios[scenario];
            const testType = document.querySelector('input[name="testType"]:checked').value;
            const alpha = parseFloat(document.getElementById('alphaSelect').value);
            
            // Update hypothesis statements
            let h0, h1, description;
            switch(testType) {
                case 'two-sided':
                    h0 = 'H‚ÇÄ: Œº‚ÇÅ = Œº‚ÇÇ';
                    h1 = 'H‚ÇÅ: Œº‚ÇÅ ‚â† Œº‚ÇÇ';
                    description = `Testing if there is ANY difference in ${config.measure} between ${config.group1} and ${config.group2}`;
                    break;
                case 'greater':
                    h0 = 'H‚ÇÄ: Œº‚ÇÅ ‚â§ Œº‚ÇÇ';
                    h1 = 'H‚ÇÅ: Œº‚ÇÅ > Œº‚ÇÇ';
                    description = `Testing if ${config.group1} has GREATER ${config.measure} than ${config.group2}`;
                    break;
                case 'less':
                    h0 = 'H‚ÇÄ: Œº‚ÇÅ ‚â• Œº‚ÇÇ';
                    h1 = 'H‚ÇÅ: Œº‚ÇÅ < Œº‚ÇÇ';
                    description = `Testing if ${config.group1} has LESS ${config.measure} than ${config.group2}`;
                    break;
            }
            
            document.getElementById('hypothesisStatements').innerHTML = `
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h5 class="font-bold text-blue-700 mb-2">üìã Research Question</h5>
                    <p class="text-sm text-blue-600">${description}</p>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h5 class="font-bold text-gray-700 mb-2">Null Hypothesis</h5>
                    <div class="text-lg font-mono">${h0}</div>
                    <p class="text-xs text-gray-600 mt-1">No difference between groups</p>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg">
                    <h5 class="font-bold text-green-700 mb-2">Alternative Hypothesis</h5>
                    <div class="text-lg font-mono">${h1}</div>
                    <p class="text-xs text-gray-600 mt-1">There is a difference between groups</p>
                </div>
                
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h5 class="font-bold text-purple-700 mb-2">Test Parameters</h5>
                    <div class="text-sm space-y-1">
                        <div>Œ± = ${alpha} (${((1-alpha)*100).toFixed(0)}% confidence)</div>
                        <div>Test: ${testType === 'two-sided' ? 'Two-Sided' : 'One-Sided'}</div>
                    </div>
                </div>
            `;
            
            // Calculate test statistics
            const se = Math.sqrt((sd1 * sd1 / n1) + (sd2 * sd2 / n2));
            const tStat = (mean2 - mean1) / se;
            const df = Math.floor(
                Math.pow((sd1*sd1/n1 + sd2*sd2/n2), 2) /
                (Math.pow(sd1*sd1/n1, 2)/(n1-1) + Math.pow(sd2*sd2/n2, 2)/(n2-1))
            );
            
            const tails = testType === 'two-sided' ? 2 : 1;
            const tCritical = getTValue(df, alpha, tails);
            
            // Calculate p-value
            let pValue;
            if (testType === 'two-sided') {
                pValue = 2 * (1 - normalCDF(Math.abs(tStat)));
            } else if (testType === 'greater') {
                pValue = 1 - normalCDF(tStat);
            } else {
                pValue = normalCDF(tStat);
            }
            
            // Determine if significant
            let significant;
            if (testType === 'two-sided') {
                significant = Math.abs(tStat) > tCritical;
            } else if (testType === 'greater') {
                significant = tStat > tCritical;
            } else {
                significant = tStat < -tCritical;
            }
            
            // Display results
            const diff = mean2 - mean1;
            const ciMargin = tCritical * se;
            const ciLower = diff - ciMargin;
            const ciUpper = diff + ciMargin;
            
            document.getElementById('testResults').innerHTML = `
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h5 class="font-bold text-blue-700 mb-3">üìä Test Statistics</h5>
                        <div class="text-sm space-y-2">
                            <div class="flex justify-between">
                                <span>Standard Error:</span>
                                <span class="font-bold">${se.toFixed(3)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>t-statistic:</span>
                                <span class="font-bold">${tStat.toFixed(3)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Degrees of freedom:</span>
                                <span class="font-bold">${df}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>t-critical:</span>
                                <span class="font-bold">¬±${tCritical.toFixed(3)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>p-value:</span>
                                <span class="font-bold">${pValue.toFixed(4)}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h5 class="font-bold text-purple-700 mb-3">üìè Confidence Interval</h5>
                        <div class="text-sm space-y-2">
                            <div>Mean Difference: <span class="font-bold">${diff.toFixed(2)}</span></div>
                            <div>95% CI: <span class="font-bold">[${ciLower.toFixed(2)}, ${ciUpper.toFixed(2)}]</span></div>
                            <div class="text-xs text-gray-600 mt-2">
                                We are 95% confident the true difference lies in this interval
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center p-6 rounded-lg ${significant ? 'bg-green-100 border-2 border-green-400' : 'bg-red-100 border-2 border-red-400'}">
                    <div class="text-4xl mb-3">${significant ? '‚úÖ' : '‚ùå'}</div>
                    <div class="text-2xl font-bold ${significant ? 'text-green-700' : 'text-red-700'} mb-2">
                        ${significant ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ'}
                    </div>
                    <div class="text-sm ${significant ? 'text-green-600' : 'text-red-600'}">
                        ${significant ? 
                            `There IS a statistically significant difference (p = ${pValue.toFixed(4)} < Œ± = ${alpha})` :
                            `There is NO statistically significant difference (p = ${pValue.toFixed(4)} > Œ± = ${alpha})`}
                    </div>
                </div>
                
                <div class="mt-4 bg-gray-50 p-4 rounded-lg text-sm">
                    <div class="font-semibold text-gray-700 mb-2">üìù Interpretation:</div>
                    <div class="text-gray-600">
                        ${significant ? 
                            `${config.group2} shows a statistically significant difference of ${Math.abs(diff).toFixed(1)} ${config.measure} compared to ${config.group1}. This difference is unlikely to have occurred by chance alone.` :
                            `There is insufficient evidence to conclude that ${config.group2} differs from ${config.group1} in terms of ${config.measure}. Any observed difference could be due to random variation.`}
                    </div>
                </div>
            `;
            
            // Update comparison methods
            updateComparisonMethods(tStat, tCritical, pValue, alpha, significant, testType);
        }

        // Update comparison methods
        function updateComparisonMethods(tStat, tCritical, pValue, alpha, significant, testType) {
            const decision = significant ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ';
            const color = significant ? 'green' : 'red';
            
            document.getElementById('comparisonMethods').innerHTML = `
                <div class="bg-white p-6 rounded-lg shadow">
                    <h4 class="text-lg font-bold text-purple-700 mb-4 text-center">Method 1: Critical Value</h4>
                    <div class="space-y-3">
                        <div class="bg-gray-50 p-3 rounded">
                            <div class="text-sm text-gray-600">Test Statistic</div>
                            <div class="text-xl font-bold text-blue-600">t = ${tStat.toFixed(3)}</div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded">
                            <div class="text-sm text-gray-600">Critical Value</div>
                            <div class="text-xl font-bold text-orange-600">t* = ¬±${tCritical.toFixed(3)}</div>
                        </div>
                        <div class="text-sm text-center">
                            ${testType === 'two-sided' ? 
                                `|${tStat.toFixed(3)}| ${Math.abs(tStat) > tCritical ? '>' : '<'} ${tCritical.toFixed(3)}` :
                                `${tStat.toFixed(3)} ${significant ? '>' : '<'} ${tCritical.toFixed(3)}`}
                        </div>
                        <div class="text-center p-3 rounded bg-${color}-100 text-${color}-700 font-bold">
                            ${decision}
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h4 class="text-lg font-bold text-purple-700 mb-4 text-center">Method 2: P-Value</h4>
                    <div class="space-y-3">
                        <div class="bg-gray-50 p-3 rounded">
                            <div class="text-sm text-gray-600">P-Value</div>
                            <div class="text-xl font-bold text-blue-600">p = ${pValue.toFixed(4)}</div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded">
                            <div class="text-sm text-gray-600">Significance Level</div>
                            <div class="text-xl font-bold text-orange-600">Œ± = ${alpha}</div>
                        </div>
                        <div class="text-sm text-center">
                            ${pValue.toFixed(4)} ${pValue < alpha ? '<' : '>'} ${alpha}
                        </div>
                        <div class="text-center p-3 rounded bg-${color}-100 text-${color}-700 font-bold">
                            ${decision}
                        </div>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow">
                    <h4 class="text-lg font-bold text-purple-700 mb-4 text-center">Method 3: R t.test()</h4>
                    <div class="space-y-3">
                        <div class="bg-gray-900 p-3 rounded font-mono text-xs text-green-400">
                            <div>t.test(group1, group2)</div>
                            <div class="mt-2 text-gray-300">
                                t = ${tStat.toFixed(3)}<br>
                                p-value = ${pValue.toFixed(4)}<br>
                                ${((1-alpha)*100).toFixed(0)}% CI: [${(parseFloat(document.getElementById('mean2Slider').value) - parseFloat(document.getElementById('mean1Slider').value) - tCritical * Math.sqrt((parseFloat(document.getElementById('sd1Slider').value)**2/parseInt(document.getElementById('n1Slider').value)) + (parseFloat(document.getElementById('sd2Slider').value)**2/parseInt(document.getElementById('n2Slider').value)))).toFixed(2)}, 
                                ${(parseFloat(document.getElementById('mean2Slider').value) - parseFloat(document.getElementById('mean1Slider').value) + tCritical * Math.sqrt((parseFloat(document.getElementById('sd1Slider').value)**2/parseInt(document.getElementById('n1Slider').value)) + (parseFloat(document.getElementById('sd2Slider').value)**2/parseInt(document.getElementById('n2Slider').value)))).toFixed(2)}]
                            </div>
                        </div>
                        <div class="text-center p-3 rounded bg-${color}-100 text-${color}-700 font-bold">
                            ${decision}
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate random data
        function generateRandomData() {
            const baseValue = 50 + Math.random() * 20;
            const effect = 3 + Math.random() * 10;
            
            document.getElementById('n1Slider').value = 20 + Math.floor(Math.random() * 25);
            document.getElementById('mean1Slider').value = (baseValue + normalRandom(0, 2)).toFixed(1);
            document.getElementById('sd1Slider').value = (6 + Math.random() * 6).toFixed(1);
            
            document.getElementById('n2Slider').value = 20 + Math.floor(Math.random() * 25);
            document.getElementById('mean2Slider').value = (baseValue + effect + normalRandom(0, 2)).toFixed(1);
            document.getElementById('sd2Slider').value = (6 + Math.random() * 6).toFixed(1);
            
            updateHypothesisTest();
        }

        // Paired test functions
        function updatePairedTest() {
            const preMean = parseFloat(document.getElementById('preMeanSlider').value);
            const postMean = parseFloat(document.getElementById('postMeanSlider').value);
            const n = parseInt(document.getElementById('pairedNSlider').value);
            const sd = parseFloat(document.getElementById('pairedSDSlider').value);
            
            document.getElementById('preMeanValue').textContent = preMean.toFixed(1);
            document.getElementById('postMeanValue').textContent = postMean.toFixed(1);
            document.getElementById('pairedNValue').textContent = n;
            document.getElementById('pairedSDValue').textContent = sd.toFixed(1);
            
            // Calculate paired t-test
            const meanDiff = postMean - preMean;
            const seDiff = sd / Math.sqrt(n);
            const tStat = meanDiff / seDiff;
            const df = n - 1;
            const alpha = 0.05;
            const tCritical = getTValue(df, alpha, 2);
            const pValue = 2 * (1 - normalCDF(Math.abs(tStat)));
            const significant = Math.abs(tStat) > tCritical;
            
            const ciMargin = tCritical * seDiff;
            const ciLower = meanDiff - ciMargin;
            const ciUpper = meanDiff + ciMargin;
            
            document.getElementById('pairedResults').innerHTML = `
                <div class="space-y-4">
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h5 class="font-bold text-green-700 mb-2">üìä Paired Differences</h5>
                        <div class="text-sm space-y-1">
                            <div>Mean Difference (dÃÑ): <span class="font-bold">${meanDiff.toFixed(2)}</span></div>
                            <div>SE of Difference: <span class="font-bold">${seDiff.toFixed(3)}</span></div>
                            <div>Sample Size: <span class="font-bold">${n}</span></div>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h5 class="font-bold text-blue-700 mb-2">üìà Test Statistics</h5>
                        <div class="text-sm space-y-1">
                            <div>t-statistic: <span class="font-bold">${tStat.toFixed(3)}</span></div>
                            <div>df: <span class="font-bold">${df}</span></div>
                            <div>t-critical: <span class="font-bold">¬±${tCritical.toFixed(3)}</span></div>
                            <div>p-value: <span class="font-bold">${pValue.toFixed(4)}</span></div>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 p-4 rounded-lg">
                        <h5 class="font-bold text-purple-700 mb-2">üìè 95% CI</h5>
                        <div class="text-sm">
                            [${ciLower.toFixed(2)}, ${ciUpper.toFixed(2)}]
                        </div>
                    </div>
                    
                    <div class="text-center p-4 rounded ${significant ? 'bg-green-100 border-2 border-green-400' : 'bg-red-100 border-2 border-red-400'}">
                        <div class="text-3xl mb-2">${significant ? '‚úÖ' : '‚ùå'}</div>
                        <div class="font-bold text-lg ${significant ? 'text-green-700' : 'text-red-700'}">
                            ${significant ? 'Reject H‚ÇÄ' : 'Fail to Reject H‚ÇÄ'}
                        </div>
                        <div class="text-sm mt-2 ${significant ? 'text-green-600' : 'text-red-600'}">
                            ${significant ? 
                                'Significant change detected after treatment' :
                                'No significant change detected after treatment'}
                        </div>
                    </div>
                </div>
            `;
            
            createPairedVisualization(preMean, postMean, sd, n);
        }

        function createPairedVisualization(preMean, postMean, sd, n) {
            const maxVal = Math.max(preMean, postMean) + sd * 2;
            const minVal = Math.min(preMean, postMean) - sd * 2;
            const range = maxVal - minVal;
            
            document.getElementById('pairedVisualization').innerHTML = `
                <div class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h5 class="font-bold text-blue-700 mb-3 text-center">Before Treatment</h5>
                            <div class="relative h-32 bg-white rounded">
                                <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 bg-blue-400 rounded-t" 
                                     style="width: 60px; height: ${((preMean - minVal) / range) * 100}%">
                                </div>
                                <div class="absolute top-2 left-1/2 transform -translate-x-1/2 text-sm font-bold text-blue-700">
                                    ${preMean.toFixed(1)}
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h5 class="font-bold text-green-700 mb-3 text-center">After Treatment</h5>
                            <div class="relative h-32 bg-white rounded">
                                <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 bg-green-400 rounded-t" 
                                     style="width: 60px; height: ${((postMean - minVal) / range) * 100}%">
                                </div>
                                <div class="absolute top-2 left-1/2 transform -translate-x-1/2 text-sm font-bold text-green-700">
                                    ${postMean.toFixed(1)}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <div class="inline-block bg-purple-100 px-6 py-3 rounded-lg">
                            <div class="text-sm text-purple-600">Mean Change</div>
                            <div class="text-2xl font-bold text-purple-700">
                                ${postMean > preMean ? '+' : ''}${(postMean - preMean).toFixed(1)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generatePairedData() {
            const baseMean = 40 + Math.random() * 20;
            const effect = 2 + Math.random() * 12;
            
            document.getElementById('preMeanSlider').value = baseMean.toFixed(1);
            document.getElementById('postMeanSlider').value = (baseMean + effect).toFixed(1);
            document.getElementById('pairedNSlider').value = 15 + Math.floor(Math.random() * 30);
            document.getElementById('pairedSDSlider').value = (4 + Math.random() * 6).toFixed(1);
            
            updatePairedTest();
        }

        // Chi-square functions
        function updateChiSquare() {
            const observed = [
                parseInt(document.getElementById('dice1').value) || 0,
                parseInt(document.getElementById('dice2').value) || 0,
                parseInt(document.getElementById('dice3').value) || 0,
                parseInt(document.getElementById('dice4').value) || 0,
                parseInt(document.getElementById('dice5').value) || 0,
                parseInt(document.getElementById('dice6').value) || 0
            ];
            
            const total = observed.reduce((a, b) => a + b, 0);
            const expected = total / 6;
            
            let chiSquare = 0;
            for (let i = 0; i < 6; i++) {
                chiSquare += Math.pow(observed[i] - expected, 2) / expected;
            }
            
            const df = 5;
            const alpha = 0.05;
            const criticalValue = 11.07; // Chi-square critical value for df=5, Œ±=0.05
            const significant = chiSquare > criticalValue;
            
            // Approximate p-value
            let pValue = 0.5;
            if (chiSquare < 1.145) pValue = 0.95;
            else if (chiSquare < 4.351) pValue = 0.50;
            else if (chiSquare < 9.236) pValue = 0.10;
            else if (chiSquare < 11.07) pValue = 0.05;
            else pValue = 0.01;
            
            document.getElementById('chiSquareResults').innerHTML = `
                <h4 class="text-lg font-bold text-red-700 mb-4">üìä Chi-Square Results</h4>
                <div class="space-y-3">
                    <div class="bg-gray-50 p-3 rounded">
                        <div class="text-sm text-gray-600">Total Rolls</div>
                        <div class="text-xl font-bold">${total}</div>
                    </div>
                    <div class="bg-gray-50 p-3 rounded">
                        <div class="text-sm text-gray-600">Expected per Face</div>
                        <div class="text-xl font-bold">${expected.toFixed(1)}</div>
                    </div>
                    <div class="bg-blue-50 p-3 rounded">
                        <div class="text-sm text-blue-600">œá¬≤ Statistic</div>
                        <div class="text-xl font-bold text-blue-700">${chiSquare.toFixed(3)}</div>
                    </div>
                    <div class="bg-orange-50 p-3 rounded">
                        <div class="text-sm text-orange-600">Critical Value (Œ±=0.05)</div>
                        <div class="text-xl font-bold text-orange-700">${criticalValue}</div>
                    </div>
                    <div class="text-center p-3 rounded ${significant ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}">
                        <div class="text-2xl mb-1">${significant ? '‚ö†Ô∏è' : '‚úÖ'}</div>
                        <div class="font-bold">
                            ${significant ? 'Dice appears UNFAIR' : 'Dice appears FAIR'}
                        </div>
                        <div class="text-xs mt-1">
                            p ${pValue < 0.05 ? '<' : '>'} 0.05
                        </div>
                    </div>
                </div>
            `;
        }

        function generateDiceData() {
            const total = 120;
            const rolls = [];
            
            // Generate slightly biased dice
            const bias = Math.random() > 0.5;
            for (let i = 0; i < total; i++) {
                if (bias && Math.random() < 0.3) {
                    rolls.push(6); // Bias toward 6
                } else {
                    rolls.push(Math.floor(Math.random() * 6) + 1);
                }
            }
            
            const counts = [0, 0, 0, 0, 0, 0];
            rolls.forEach(r => counts[r-1]++);
            
            for (let i = 0; i < 6; i++) {
                document.getElementById(`dice${i+1}`).value = counts[i];
            }
            
            updateChiSquare();
        }

        function updateContingency() {
            const observed = [
                [parseInt(document.getElementById('cell11').value) || 0,
                 parseInt(document.getElementById('cell12').value) || 0,
                 parseInt(document.getElementById('cell13').value) || 0],
                [parseInt(document.getElementById('cell21').value) || 0,
                 parseInt(document.getElementById('cell22').value) || 0,
                 parseInt(document.getElementById('cell23').value) || 0]
            ];
            
            // Calculate row and column totals
            const rowTotals = observed.map(row => row.reduce((a, b) => a + b, 0));
            const colTotals = [0, 0, 0];
            for (let j = 0; j < 3; j++) {
                colTotals[j] = observed[0][j] + observed[1][j];
            }
            const grandTotal = rowTotals.reduce((a, b) => a + b, 0);
            
            // Calculate expected frequencies
            const expected = [];
            for (let i = 0; i < 2; i++) {
                expected[i] = [];
                for (let j = 0; j < 3; j++) {
                    expected[i][j] = (rowTotals[i] * colTotals[j]) / grandTotal;
                }
            }
            
            // Calculate chi-square
            let chiSquare = 0;
            for (let i = 0; i < 2; i++) {
                for (let j = 0; j < 3; j++) {
                    chiSquare += Math.pow(observed[i][j] - expected[i][j], 2) / expected[i][j];
                }
            }
            
            const df = (2 - 1) * (3 - 1); // 2 degrees of freedom
            const criticalValue = 5.991; // Chi-square critical for df=2, Œ±=0.05
            const significant = chiSquare > criticalValue;
            
            document.getElementById('contingencyResults').innerHTML = `
                <h4 class="text-lg font-bold text-indigo-700 mb-4">üìä Independence Test</h4>
                <div class="space-y-3">
                    <div class="bg-gray-50 p-3 rounded">
                        <div class="text-sm text-gray-600">Total Observations</div>
                        <div class="text-xl font-bold">${grandTotal}</div>
                    </div>
                    <div class="bg-blue-50 p-3 rounded">
                        <div class="text-sm text-blue-600">œá¬≤ Statistic</div>
                        <div class="text-xl font-bold text-blue-700">${chiSquare.toFixed(3)}</div>
                    </div>
                    <div class="bg-orange-50 p-3 rounded">
                        <div class="text-sm text-orange-600">Critical Value (df=${df})</div>
                        <div class="text-xl font-bold text-orange-700">${criticalValue}</div>
                    </div>
                    <div class="text-center p-3 rounded ${significant ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}">
                        <div class="text-2xl mb-1">${significant ? '‚úÖ' : '‚ùå'}</div>
                        <div class="font-bold text-sm">
                            ${significant ? 'Variables are DEPENDENT' : 'Variables are INDEPENDENT'}
                        </div>
                        <div class="text-xs mt-1">
                            ${significant ? 'Gender and fruit preference are related' : 'No relationship detected'}
                        </div>
                    </div>
                </div>
            `;
        }

        function generateContingencyData() {
            const total = 100 + Math.floor(Math.random() * 50);
            const cells = [];
            
            for (let i = 0; i < 6; i++) {
                cells.push(Math.floor(Math.random() * 30) + 10);
            }
            
            document.getElementById('cell11').value = cells[0];
            document.getElementById('cell12').value = cells[1];
            document.getElementById('cell13').value = cells[2];
            document.getElementById('cell21').value = cells[3];
            document.getElementById('cell22').value = cells[4];
            document.getElementById('cell23').value = cells[5];
            
            updateContingency();
        }

        // Quiz functions
        function loadQuizQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            const selectedAnswer = quizAnswers[currentQuestionIndex];
            
            document.getElementById('quizContent').innerHTML = `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">${question.question}</h4>
                    <div class="space-y-2">
                        ${question.options.map((option, index) => `
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer ${selectedAnswer === index ? 'bg-blue-50 border-blue-400' : ''}">
                                <input type="radio" name="answer" value="${index}" ${selectedAnswer === index ? 'checked' : ''} class="mr-3">
                                <span>${option}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>
            `;
            
            updateQuizProgress();
        }

        function nextQuestion() {
            const selectedAnswer = document.querySelector('input[name="answer"]:checked');
            if (selectedAnswer) {
                quizAnswers[currentQuestionIndex] = parseInt(selectedAnswer.value);
            }
            
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuizQuestion();
            } else {
                showQuizResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuizQuestion();
            }
        }

        function updateQuizProgress() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('quizProgress').textContent = `${Math.round(progress)}%`;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = currentQuestionIndex === quizQuestions.length - 1 ? 'Finish' : 'Next';
        }

        function showQuizResults() {
            let correct = 0;
            quizQuestions.forEach((question, index) => {
                if (quizAnswers[index] === question.correct) correct++;
            });
            
            const percentage = (correct / quizQuestions.length) * 100;
            
            document.getElementById('quizContent').innerHTML = `
                <div class="text-center">
                    <h3 class="text-2xl font-bold text-indigo-700 mb-4">Quiz Complete!</h3>
                    <div class="text-6xl mb-4">${percentage >= 80 ? 'üéâ' : percentage >= 60 ? 'üëç' : 'üìö'}</div>
                    <p class="text-xl mb-4">You scored ${correct} out of ${quizQuestions.length} (${percentage.toFixed(0)}%)</p>
                    <div class="text-left mt-6 space-y-4">
                        ${quizQuestions.map((question, index) => `
                            <div class="border rounded p-4 ${quizAnswers[index] === question.correct ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}">
                                <p class="font-semibold mb-2">Q${index + 1}: ${question.question}</p>
                                <p class="text-sm text-gray-600 mb-2">Your answer: ${question.options[quizAnswers[index] || 0]}</p>
                                ${quizAnswers[index] !== question.correct ? `<p class="text-sm text-gray-600 mb-2">Correct answer: ${question.options[question.correct]}</p>` : ''}
                                <p class="text-sm text-blue-600">${question.explanation}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('prevBtn').style.display = 'none';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateScenario();
            updateHypothesisTest();
            updatePairedTest();
            updateChiSquare();
            updateContingency();
            loadQuizQuestion();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a03257586207af4',t:'MTc2MzQyMzU5NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>